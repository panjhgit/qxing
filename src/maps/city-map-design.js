/**
 * åŸå¸‚åœ°å›¾è®¾è®¡ - 10000Ã—10000åƒç´ 
 * ä½¿ç”¨200Ã—200åƒç´ ç½‘æ ¼ï¼Œå³50Ã—50çŸ©é˜µ
 * æ”¯æŒä¸åŒå¤§å°çš„å»ºç­‘å’Œé—¨çš„æ™ºèƒ½ç”Ÿæˆ
 */

const CityMapDesign = {
    // åœ°å›¾åŸºç¡€é…ç½®
    MAP_CONFIG: {
        name: 'åŸå¸‚åœ°å›¾',
        width: 10000,
        height: 10000,
        cellSize: 200,        // æ¯ä¸ªæ ¼å­200Ã—200åƒç´ 
        gridCols: 50,         // 10000Ã·200 = 50åˆ—
        gridRows: 50,         // 10000Ã·200 = 50è¡Œ
        description: 'ä¸€ä¸ªç°ä»£åŒ–çš„åŸå¸‚ï¼ŒåŒ…å«å•†ä¸šåŒºã€ä½å®…åŒºã€å·¥ä¸šåŒºå’Œç‰¹æ®Šè®¾æ–½'
    },

    // å»ºç­‘ç±»å‹å®šä¹‰
    BUILDING_TYPES: {
        0: { name: 'é©¬è·¯/ç©ºåœ°', type: 'road', color: '#FFFFFF', icon: 'ğŸ›£ï¸', walkable: true, size: 200 },
        
        // å°å‹å»ºç­‘ (200Ã—200ï¼Œ1ä¸ªæ ¼å­)
        1: { name: 'å°å‹æ°‘æˆ¿', type: 'residential', color: '#CD853F', icon: 'ğŸ ', walkable: false, size: 200, hasDoor: true },
        2: { name: 'å°å‹å•†åº—', type: 'commercial', color: '#32CD32', icon: 'ğŸª', walkable: false, size: 200, hasDoor: true },
        3: { name: 'å°å‹é¤å…', type: 'commercial', color: '#FFD700', icon: 'ğŸ½ï¸', walkable: false, size: 200, hasDoor: true },
        4: { name: 'å°å‹è¯Šæ‰€', type: 'facility', color: '#FFB6C1', icon: 'ğŸ¥', walkable: false, size: 200, hasDoor: true },
        
        // ä¸­å‹å»ºç­‘ (400Ã—400ï¼Œ2Ã—2æ ¼å­)
        5: { name: 'ä¸­å‹å…¬å¯“', type: 'residential', color: '#87CEEB', icon: 'ğŸ¢', walkable: false, size: 400, hasDoor: true },
        6: { name: 'ä¸­å‹åŠå…¬æ¥¼', type: 'commercial', color: '#D3D3D3', icon: 'ğŸ¢', walkable: false, size: 400, hasDoor: true },
        7: { name: 'ä¸­å‹è¶…å¸‚', type: 'commercial', color: '#98FB98', icon: 'ğŸ›’', walkable: false, size: 400, hasDoor: true },
        8: { name: 'ä¸­å‹åŒ»é™¢', type: 'facility', color: '#FF6347', icon: 'ğŸ¥', walkable: false, size: 400, hasDoor: true },
        
        // å¤§å‹å»ºç­‘ (600Ã—600ï¼Œ3Ã—3æ ¼å­)
        9: { name: 'å¤§å‹å•†åœº', type: 'commercial', color: '#20B2AA', icon: 'ğŸ¬', walkable: false, size: 600, hasDoor: true },
        10: { name: 'å¤§å‹å­¦æ ¡', type: 'facility', color: '#4169E1', icon: 'ğŸ«', walkable: false, size: 600, hasDoor: true },
        11: { name: 'å¤§å‹å·¥å‚', type: 'industrial', color: '#8B4513', icon: 'ğŸ­', walkable: false, size: 600, hasDoor: true },
        12: { name: 'å¤§å‹åœè½¦åœº', type: 'facility', color: '#696969', icon: 'ğŸ…¿ï¸', walkable: true, size: 600, hasDoor: false },
        
        // è¶…å¤§å‹å»ºç­‘ (800Ã—800ï¼Œ4Ã—4æ ¼å­)
        13: { name: 'è¶…å¤§å‹è´­ç‰©ä¸­å¿ƒ', type: 'commercial', color: '#FF1493', icon: 'ğŸ¢', walkable: false, size: 800, hasDoor: true },
        14: { name: 'è¶…å¤§å‹åŒ»é™¢', type: 'facility', color: '#DC143C', icon: 'ğŸ¥', walkable: false, size: 800, hasDoor: true },
        15: { name: 'è¶…å¤§å‹å·¥ä¸šå›­', type: 'industrial', color: '#2F4F4F', icon: 'ğŸ­', walkable: false, size: 800, hasDoor: true },
        
        // ç‰¹æ®Šå»ºç­‘
        16: { name: 'å…¬å›­', type: 'recreation', color: '#90EE90', icon: 'ğŸŒ³', walkable: true, size: 400, hasDoor: false },
        17: { name: 'è­¦å¯Ÿå±€', type: 'facility', color: '#9932CC', icon: 'ğŸ‘®', walkable: false, size: 400, hasDoor: true },
        18: { name: 'æ¶ˆé˜²ç«™', type: 'facility', color: '#FF4500', icon: 'ğŸš’', walkable: false, size: 400, hasDoor: true },
        19: { name: 'é“¶è¡Œ', type: 'commercial', color: '#FFD700', icon: 'ğŸ¦', walkable: false, size: 200, hasDoor: true }
    },

    // åŸå¸‚åœ°å›¾çŸ©é˜µ (50Ã—50)
    CITY_MAP_MATRIX: [
        // ç¬¬0è¡Œï¼šè¾¹ç•Œé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬1-4è¡Œï¼šåŒ—éƒ¨ä½å®…åŒº (å°å‹æ°‘æˆ¿)
        [0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,0],
        [0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,0],
        [0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,0],
        [0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,0],
        
        // ç¬¬5è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬6-9è¡Œï¼šåŒ—éƒ¨å•†ä¸šåŒº (å°å‹å•†åº—å’Œé¤å…)
        [0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,0],
        [0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,0],
        [0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,0],
        [0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,2,2,2,2,0,0,3,3,3,3,0,0,0],
        
        // ç¬¬10è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬11-14è¡Œï¼šåŒ—éƒ¨ä¸­å‹å»ºç­‘åŒº (å…¬å¯“å’ŒåŠå…¬æ¥¼)
        [0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,0],
        [0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,0],
        [0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,0],
        [0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,5,5,5,5,0,0,6,6,6,6,0,0,0],
        
        // ç¬¬15è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬16-19è¡Œï¼šåŒ—éƒ¨å¤§å‹å»ºç­‘åŒº (å•†åœºå’Œå­¦æ ¡)
        [0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,0],
        [0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,0],
        [0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,0],
        [0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,9,9,9,9,0,0,10,10,10,10,0,0,0],
        
        // ç¬¬20è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬21-24è¡Œï¼šä¸­å¿ƒå•†ä¸šåŒº (è¶…å¤§å‹è´­ç‰©ä¸­å¿ƒ)
        [0,13,13,13,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,13,13,13,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,13,13,13,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,13,13,13,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬25è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬26-29è¡Œï¼šä¸­å¿ƒåŒ»ç–—åŒº (è¶…å¤§å‹åŒ»é™¢)
        [0,0,0,0,0,0,0,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬30è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬31-34è¡Œï¼šå—éƒ¨ä½å®…åŒº (ä¸­å‹å…¬å¯“)
        [0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,0],
        [0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,0],
        [0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,0],
        [0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,5,5,5,5,0,0,0],
        
        // ç¬¬35è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬36-39è¡Œï¼šå—éƒ¨å·¥ä¸šåŒº (å¤§å‹å·¥å‚)
        [0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,11,11,11,11,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬40è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬41-44è¡Œï¼šå—éƒ¨ç‰¹æ®Šè®¾æ–½åŒº (è­¦å¯Ÿå±€ã€æ¶ˆé˜²ç«™ã€é“¶è¡Œ)
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,0,0,18,18,18,18,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,0,0,18,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,0,0,18,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,0,0,18,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬45è¡Œï¼šé©¬è·¯
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        
        // ç¬¬46-49è¡Œï¼šå—éƒ¨å…¬å›­å’Œä¼‘é—²åŒº
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    ],

    // åŒºåŸŸåˆ†å¸ƒè¯´æ˜
    AREA_DESCRIPTION: {
        'north_residential': {
            name: 'åŒ—éƒ¨ä½å®…åŒº',
            location: 'ç¬¬1-4è¡Œ',
            description: 'å¯†é›†çš„å°å‹æ°‘æˆ¿ï¼Œé€‚åˆæ™®é€šå±…æ°‘å±…ä½',
            buildingTypes: ['å°å‹æ°‘æˆ¿'],
            density: 'é«˜å¯†åº¦',
            walkable: false
        },
        'north_commercial': {
            name: 'åŒ—éƒ¨å•†ä¸šåŒº',
            location: 'ç¬¬6-9è¡Œ',
            description: 'å°å‹å•†åº—å’Œé¤å…ï¼Œä¸ºåŒ—éƒ¨å±…æ°‘æä¾›æ—¥å¸¸æœåŠ¡',
            buildingTypes: ['å°å‹å•†åº—', 'å°å‹é¤å…'],
            density: 'ä¸­ç­‰å¯†åº¦',
            walkable: false
        },
        'north_medium': {
            name: 'åŒ—éƒ¨ä¸­å‹å»ºç­‘åŒº',
            location: 'ç¬¬11-14è¡Œ',
            description: 'ä¸­å‹å…¬å¯“å’ŒåŠå…¬æ¥¼ï¼Œé€‚åˆä¸­äº§é˜¶çº§å’Œä¸Šç­æ—',
            buildingTypes: ['ä¸­å‹å…¬å¯“', 'ä¸­å‹åŠå…¬æ¥¼'],
            density: 'ä¸­ç­‰å¯†åº¦',
            walkable: false
        },
        'north_large': {
            name: 'åŒ—éƒ¨å¤§å‹å»ºç­‘åŒº',
            location: 'ç¬¬16-19è¡Œ',
            description: 'å¤§å‹å•†åœºå’Œå­¦æ ¡ï¼Œä¸ºæ•´ä¸ªåŒ—éƒ¨åŒºåŸŸæä¾›æœåŠ¡',
            buildingTypes: ['å¤§å‹å•†åœº', 'å¤§å‹å­¦æ ¡'],
            density: 'ä½å¯†åº¦',
            walkable: false
        },
        'center_commercial': {
            name: 'ä¸­å¿ƒå•†ä¸šåŒº',
            location: 'ç¬¬21-24è¡Œ',
            description: 'è¶…å¤§å‹è´­ç‰©ä¸­å¿ƒï¼ŒåŸå¸‚çš„ä¸»è¦å•†ä¸šä¸­å¿ƒ',
            buildingTypes: ['è¶…å¤§å‹è´­ç‰©ä¸­å¿ƒ'],
            density: 'ä½å¯†åº¦',
            walkable: false
        },
        'center_medical': {
            name: 'ä¸­å¿ƒåŒ»ç–—åŒº',
            location: 'ç¬¬26-29è¡Œ',
            description: 'è¶…å¤§å‹åŒ»é™¢ï¼ŒåŸå¸‚çš„ä¸»è¦åŒ»ç–—ä¸­å¿ƒ',
            buildingTypes: ['è¶…å¤§å‹åŒ»é™¢'],
            density: 'ä½å¯†åº¦',
            walkable: false
        },
        'south_residential': {
            name: 'å—éƒ¨ä½å®…åŒº',
            location: 'ç¬¬31-34è¡Œ',
            description: 'ä¸­å‹å…¬å¯“ï¼Œé€‚åˆå®¶åº­å±…ä½',
            buildingTypes: ['ä¸­å‹å…¬å¯“'],
            density: 'ä¸­ç­‰å¯†åº¦',
            walkable: false
        },
        'south_industrial': {
            name: 'å—éƒ¨å·¥ä¸šåŒº',
            location: 'ç¬¬36-39è¡Œ',
            description: 'å¤§å‹å·¥å‚ï¼ŒåŸå¸‚çš„ä¸»è¦å·¥ä¸šåŸºåœ°',
            buildingTypes: ['å¤§å‹å·¥å‚'],
            density: 'ä½å¯†åº¦',
            walkable: false
        },
        'south_facilities': {
            name: 'å—éƒ¨ç‰¹æ®Šè®¾æ–½åŒº',
            location: 'ç¬¬41-44è¡Œ',
            description: 'è­¦å¯Ÿå±€ã€æ¶ˆé˜²ç«™ã€é“¶è¡Œç­‰å…¬å…±æœåŠ¡è®¾æ–½',
            buildingTypes: ['è­¦å¯Ÿå±€', 'æ¶ˆé˜²ç«™', 'é“¶è¡Œ'],
            density: 'ä½å¯†åº¦',
            walkable: false
        },
        'south_park': {
            name: 'å—éƒ¨å…¬å›­åŒº',
            location: 'ç¬¬46-49è¡Œ',
            description: 'å…¬å›­å’Œä¼‘é—²åŒºï¼Œæä¾›ç»¿è‰²ç©ºé—´å’Œå¨±ä¹è®¾æ–½',
            buildingTypes: ['å…¬å›­'],
            density: 'ä½å¯†åº¦',
            walkable: true
        }
    },

    // é—¨çš„æ™ºèƒ½ç”Ÿæˆè§„åˆ™
    DOOR_GENERATION_RULES: {
        // å°å‹å»ºç­‘ï¼šåœ¨é¢å‘è¡—é“çš„è¾¹ç”Ÿæˆé—¨
        'small': {
            doorSize: 40,
            doorOffset: 80, // è·ç¦»å»ºç­‘è¾¹ç¼˜çš„åç§»
            doorStyle: 'simple'
        },
        // ä¸­å‹å»ºç­‘ï¼šåœ¨é¢å‘è¡—é“çš„è¾¹ç”Ÿæˆé—¨ï¼Œå¯èƒ½æœ‰å¤šä¸ªé—¨
        'medium': {
            doorSize: 50,
            doorOffset: 75,
            doorStyle: 'modern',
            maxDoors: 2
        },
        // å¤§å‹å»ºç­‘ï¼šåœ¨é¢å‘è¡—é“çš„è¾¹ç”Ÿæˆä¸»é—¨å’Œä¾§é—¨
        'large': {
            doorSize: 60,
            doorOffset: 70,
            doorStyle: 'grand',
            maxDoors: 3
        },
        // è¶…å¤§å‹å»ºç­‘ï¼šåœ¨é¢å‘è¡—é“çš„è¾¹ç”Ÿæˆå¤šä¸ªé—¨
        'xlarge': {
            doorSize: 70,
            doorOffset: 65,
            doorStyle: 'luxury',
            maxDoors: 4
        }
    },

    // è·å–å»ºç­‘çš„é—¨ä¿¡æ¯
    getBuildingDoorInfo: function(buildingType, buildingBounds, streetDirection) {
        const buildingConfig = this.BUILDING_TYPES[buildingType];
        if (!buildingConfig || !buildingConfig.hasDoor) {
            return null;
        }

        // æ ¹æ®å»ºç­‘å¤§å°ç¡®å®šé—¨é…ç½®
        let doorConfig;
        if (buildingConfig.size <= 200) {
            doorConfig = this.DOOR_GENERATION_RULES.small;
        } else if (buildingConfig.size <= 400) {
            doorConfig = this.DOOR_GENERATION_RULES.medium;
        } else if (buildingConfig.size <= 600) {
            doorConfig = this.DOOR_GENERATION_RULES.large;
        } else {
            doorConfig = this.DOOR_GENERATION_RULES.xlarge;
        }

        // è®¡ç®—é—¨çš„ä½ç½®ï¼ˆé¢å‘è¡—é“ï¼‰
        const doors = [];
        const doorCount = Math.min(doorConfig.maxDoors || 1, 
            Math.floor(buildingConfig.size / 200)); // æ ¹æ®å»ºç­‘å¤§å°å†³å®šé—¨æ•°é‡

        for (let i = 0; i < doorCount; i++) {
            const door = {
                x: buildingBounds.left + doorConfig.doorOffset + (i * (buildingConfig.size / doorCount)),
                y: buildingBounds.top + doorConfig.doorOffset,
                width: doorConfig.doorSize,
                height: doorConfig.doorSize,
                style: doorConfig.doorStyle,
                direction: 'south' // é»˜è®¤æœå—ï¼ˆé¢å‘è¡—é“ï¼‰
            };
            doors.push(door);
        }

        return {
            buildingType: buildingConfig.name,
            doorCount: doors.length,
            doors: doors,
            doorConfig: doorConfig
        };
    },

    // è·å–åœ°å›¾ç»Ÿè®¡ä¿¡æ¯
    getMapStatistics: function() {
        const stats = {
            totalCells: 0,
            buildingCounts: {},
            walkableArea: 0,
            buildingArea: 0,
            roadArea: 0
        };

        for (let row = 0; row < this.CITY_MAP_MATRIX.length; row++) {
            for (let col = 0; col < this.CITY_MAP_MATRIX[row].length; col++) {
                const cellType = this.CITY_MAP_MATRIX[row][col];
                stats.totalCells++;
                
                if (cellType === 0) {
                    stats.roadArea++;
                } else {
                    const buildingType = this.BUILDING_TYPES[cellType];
                    if (buildingType) {
                        if (!stats.buildingCounts[buildingType.name]) {
                            stats.buildingCounts[buildingType.name] = 0;
                        }
                        stats.buildingCounts[buildingType.name]++;
                        
                        if (buildingType.walkable) {
                            stats.walkableArea++;
                        } else {
                            stats.buildingArea++;
                        }
                    }
                }
            }
        }

        return stats;
    },

    // æ‰“å°åœ°å›¾æ¦‚è§ˆ
    printMapOverview: function() {
        console.log('=== åŸå¸‚åœ°å›¾æ¦‚è§ˆ ===');
        console.log('åœ°å›¾å°ºå¯¸:', this.MAP_CONFIG.width, 'Ã—', this.MAP_CONFIG.height, 'åƒç´ ');
        console.log('ç½‘æ ¼å°ºå¯¸:', this.MAP_CONFIG.gridCols, 'Ã—', this.MAP_CONFIG.gridRows);
        console.log('å•å…ƒæ ¼å¤§å°:', this.MAP_CONFIG.cellSize, 'Ã—', this.MAP_CONFIG.cellSize, 'åƒç´ ');
        
        console.log('\n=== åŒºåŸŸåˆ†å¸ƒ ===');
        for (const areaKey in this.AREA_DESCRIPTION) {
            const area = this.AREA_DESCRIPTION[areaKey];
            console.log(`${area.name}: ${area.location} - ${area.description}`);
        }
        
        console.log('\n=== å»ºç­‘ç±»å‹ ===');
        for (const typeId in this.BUILDING_TYPES) {
            const building = this.BUILDING_TYPES[typeId];
            console.log(`${typeId}: ${building.name} (${building.size}Ã—${building.size}åƒç´ , ${building.walkable ? 'å¯é€šè¡Œ' : 'ä¸å¯é€šè¡Œ'})`);
        }
        
        console.log('\n=== åœ°å›¾ç»Ÿè®¡ ===');
        const stats = this.getMapStatistics();
        console.log('æ€»æ ¼å­æ•°:', stats.totalCells);
        console.log('å»ºç­‘åŒºåŸŸ:', stats.buildingArea, 'æ ¼å­');
        console.log('é“è·¯åŒºåŸŸ:', stats.roadArea, 'æ ¼å­');
        console.log('å¯é€šè¡ŒåŒºåŸŸ:', stats.walkableArea, 'æ ¼å­');
        
        console.log('\n=== å»ºç­‘æ•°é‡ç»Ÿè®¡ ===');
        for (const buildingName in stats.buildingCounts) {
            console.log(`${buildingName}: ${stats.buildingCounts[buildingName]} æ ¼å­`);
        }
    }
};

// å¯¼å‡ºåŸå¸‚åœ°å›¾è®¾è®¡
if (typeof module !== 'undefined' && module.exports) {
    module.exports = CityMapDesign;
} else if (typeof window !== 'undefined') {
    window.CityMapDesign = CityMapDesign;
}

// æ‰“å°åœ°å›¾æ¦‚è§ˆ
CityMapDesign.printMapOverview();
